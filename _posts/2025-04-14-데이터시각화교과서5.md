---
title: >-
    [데이터 시각화 교과서] 12 - 14장
author: csm
date: 2025-04-14 14:10:00 +0900
categories: [Data, ⟪Fundamentals of Data Visualization⟫]
tags: [book]
description: ⟪Fundamentals of Data Visualization⟫, Claus O. Wilke
math: True
---

[Fundamentals of Data Visualization](https://clauswilke.com/dataviz/)

## 12 Visualizing associations among two or more quantitative variables
---
- 데이터셋에 정량 변수가 2개 이상 들어 있고, 이 변수들의 상관관계 표현 
- 두 변수의 관계를 나타낼 땐 흔히 산점도를 사용
- 두 변수 이상을 도표 하나에 나타낼 땐 버블 차트, 산점도 매트릭스, 상관곡선이 적합
- 변수가 많은 고차원 데이터셋을 다룰 땐 주성분 분석 기법 등 차원 축소

### 12.1 Scatter plots
- 큰어치새 123마리를 측정한 데이터셋을 활용해 산점도 작성
    - 데이터셋은 각 새의 두장(부리 끝 부터 뒤통수까지의 거리), 두개골 크기(두장에서 부리 길이를 뺀 값), 몸무게 값으로 구성
- 두장과 몸무게를 대비한 산점도
    - 분산된 군 형태, 무게가 많이 나갈수록 두장이 긴 경향
- 두장과 몸무게의 전반적인 상관관계가 성별을 분리해도 유효한지 확인
    - 성별에 따라 각 점을 색칠
        - 두장과 몸무게의 전반적인 경향이, 적어도 부분적으로는 새의 성별로 인함
        - 수컷보다 암컷이 평균적으로 가벼움
- 두개골 크기를 표시하기 위해 점의 크기 속성 활용 ⟹ 버블 차트(bubble chart)
- 버블 차트의 단점
    - 동일한 유형의 변수(정량 변수)를 각기 다른 두 가지 스케일인 위치와 크기를 통해 보여줌. ⟶ 변수 사이의 연관성이 어떤 영향을 미치는지 눈으로 확인 어려움
    - 버블 크기의 한계 ⟶ 동일한 값을 버블의 위치로 표현했을 때보다 각 값의 차이를 알아보기 힘듦
- 산점도 매트릭스(scatterplot matrix): 각 변수를 다른 변수들과 모든 경우의 수로 일대일 대응시켜 비교
    - 각 도표마다 2가지 데이터 차원 표시
    - 두개골의 크기와 몸무게의 연관성에서는 암컷과 수컷 사이에 큰 차이 없음
    - 두장과 몸무게의 관련성에서는 성별에 따른 차이가 뚜렷함. 암컷에 비해 수컷의 부리가 긴 편

### 12.2 Correlograms
- 정량 변수가 3개나 4개 이상이면, 변수 쌍들 사이의 연관성을 정량 데이터로 표현해 시각화 ⟶ 상관계수를 계산
- 상관계수 r: -1과 1 사이에 있는 숫자, 두 변수의 covary(공분산)
    - 공분산: 두 변수가 선형적으로 상관관계가 있음
    - r이 0이면 상관관계가 전혀 없고, 1이나 -1이면 완전한 상관관계인 선형관계
    - 양의 상관관계(correlated) / 음의 상관관계(anticorrelated)
- 상관계수 공식
    
    $$r = \frac{\sum_i (x_i - \bar x)(y_i - \bar y)}{\sqrt{\sum_i (x_i-\bar x)^2}\sqrt{\sum_i (y_i-\bar y)^2}}$$
    
    - $$x_i, y_i$$: 관측값 집합, $$\bar x , \bar y$$: 각 관측 값 집합의 표본평균
    1. $$x_i$$와 $$y_i$$ 기준으로 공식이 대칭을 이루므로, $$x$$와 $$y$$의 상관관계는 $$y$$와 $$x$$의 상관관계와 같다
    2. $$x_i$$와 $$y_i$$의 개별 값은 각 샘플평균과 차이가 있는 경우에만 공식을 대입할 수 있으므로, 상수항을 사용해 데이터셋 전체를 상수 값만큼 이동하면 상관계수는 변하지 않는다: $$x_i$$를 $$x_i'=x_i+C$$로 대체
    3. 데이터의 크기를 바꾸더라도 상관계수는 변하지 않는다: $$x_i'=Cx_i$$로 대체

- 상관곡선(correlogram): 상관계수를 시각화한 도표
    - 유리 파편 200여 개의 성분을 다양한 산화 무기물 함량으로 표현. 산화물 7종의 함량을 측정해 6+5+4+3+2+1=21쌍의 상관관계 도출
    - 타일 하나가 상관계수 하나
    - 마그네슘 함량은 거의 모든 산화물 함량과 음의 상관관계, 알류미늄과 바륨은 강한 양의 상관관계
    - 상관곡선의 단점
        - 상관관계가 낮은 경우에도 관계에 의미가 있는 것처럼 보임 ⟹ 상관관계를 색색 동그라미로 표시, 동그라미의 크기로 상관계수의 절댓값 표현
        - 추상적임 ⟶ 데이터 원본에 계산 과정을 더해 관념적으로 도출한 정량 데이터보다는, 데이터 원본을 그대로 시각화하는 것이 좋음 ⟹ 타협점: 차원 축소 기법

### 12.3 Dimension reduction
- 대부분의 고차원 데이터셋은 중복된 정보를 전하고 서로 상관성있는 여러 변수로 이루어짐 ⟶ 차원 축소 개념 착안, 핵심 정보를 유지하며 차원의 수 감소
- 대표적인 기법 주성분 분석(PCA, principal components analysis): 데이터에 포함된 원래 변수들을 선형적으로 조합해서 주성분(PC, Principal components)이라는 새 변수 집합 도출
    - 원래 변수는 평균 0와 단위 분산(분산값이 1)을 갖도록 표준화
    - 각 성분은 상관관계가 없고, 순서는 분산이 가장 많은 성분부터 적은 성분 순으로 배열
- 주성분 분석 과정
    1. 데이터 원래 값을 0 평균과 단위 분산으로 표준화
    2. 데이터에서 분산이 가장 큰 방향을 기준으로 새 변수들을 정의(축을 새로 그림)
    3. 데이터를 새 좌표에 표시
    - 수학적으로 봤을 때 새 좌표를 그린 결과는 원점을 중심으로 데이터 포인트들을 회전
- 주성분 분석 작업에서 관심을 두는 정보
    1. 주성분들의 구성 성분
        - 주성분들은 표준화된 원상태 변수들의 선형적 조합이므로, 원상태 변수들을 화살표로 나타낸 다음 각각이 주성분에 영향을 미치는 범위를 가리키게 함
            - 칼숨과 칼륨은 주성분 2에만 주된 영향
    2. 주성분 공간을 채우는 개별 데이터 포인트들
        - 주성분 공간에 데이터 원본을 그림 ⟶ 유리 파편들이 유형별로 무리지어 있음
            - 식기, 그릇은 실내등, 창문 파편과 확실히 구분됨
            - 주성분들의 구성 성분을 그린 도표와 비교하면 창문에서 나온 표본의 마그네슘 함량이 평균보다 높고, 바륨, 알류미늄, 나트륨 함량은 평균보다 낮으며, 실내등 표본의 성분 함량은 그 반대

### 12.4 Paired data
- 쌍 데이터: 정량 데이터 중 특수한 경우로, 약간 다른 조건에서 정량 값이 같은 측정치가 둘 이상 있는 데이터.
    - 쌍을 이루는 두 측정값이 다른 쌍에 속한 측정값들보다 서로 더 유사하다고 추정 ⟶ 쌍 데이터를 다룰 땐 쌍을 이루는 측정값들 사이의 차이를 강조하는 시각화 방식 선택
- ⟶ x=y를 나타내는 사선 위에 단순한 산점도를 그리는 것
    - 하나의 쌍을 이루는 두 측정값 사이의 차이가 임의의 노이즈뿐이라고 할 때, 해당 표본에 있는 모든 데이터 포인트가 사선 주변에 대칭으로 분포 
    - 쌍을 이루는 측정값 간의 차이가 체계적인 경우, 데이터 포인트들이 사선을 중심으로 위쪽이나 아래쪽으로 움직인 모습
    - 데이터 포인트 수가 많거나 특별한 기댓값이 없는 상태에서 데이터셋 전체의 체계적인 편차를 나타내려고 할 때 유용
- 경사 차트(slopegraph): 세로 방향의 주 줄에 각 측정값을 점으로 나타낸 뒤, 대응하는 점들을 선으로 이어 쌍을 나타냄 
    - 관측 값이 많지 않고 개별 데이터의 유사성에 주목할 때 유용
    - 선의 기울기는 변화한 정도와 방향
    - 산점도와 달리 측정값 둘 이상을 동시에 비교 가능

## 13 Visualiazing time series and other fuctions of an independent variable
---
### 13.1 Individual time series 
### 13.2 Multiple time series and dose-response curves
### 13.3 Time series of two or more response variables

## 14 Visualizing trends
---
### 14.1 Smoothing 
### 14.2 Showing trends with a defined functional form
### 14.3 Detrending and time-series decomposition

